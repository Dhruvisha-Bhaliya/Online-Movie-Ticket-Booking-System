<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core">
    <f:view>
        <f:metadata>
            <f:viewParam name="movieId" value="#{movieDetailController.movieId}" required="true"/>

        </f:metadata>
        <h:head>
            <title>#{movieDetailController.currentMovie.movieTitle} - Movie Details</title>
            <style>
             
                .detail-hero {
                    position: relative;
                    width: 100%;
                    height: 60vh;
                    background-size: cover;
                    background-position: top center;
                    box-shadow: inset 0 0 0 1000px rgba(0,0,0,0.6);
                    color: white;
                    margin-bottom: 30px;
                }

                .detail-content {
                    max-width: 1200px;
                    margin: 0 auto;
                    display: flex;
                    gap: 40px;
                    align-items: flex-end;
                    padding: 0 30px;
                    position: relative;
                    top: 100%;
                    transform: translateY(-100%);
                }

                .poster-small img {
                    width: 200px;
                    height: 290px;
                    object-fit: cover;
                    border-radius: 8px;
                    box-shadow: 0 10px 20px rgba(0,0,0,0.5);
                }

                .info {
                    flex-grow: 1;
                    padding-bottom: 20px;
                }

                .info h1 {
                    font-size: 3rem;
                    margin-bottom: 5px;
                }

                .languages {
                    font-size: 1.1rem;
                    color: #ccc;
                    margin-bottom: 20px;
                }

                .rating-info {
                    display: flex;
                    align-items: center;
                    font-size: 1.2rem;
                    margin-bottom: 20px;
                }

                .rating-large {
                    font-weight: bold;
                    color: #38c172; 
                    margin-right: 15px;
                }

                .votes-large {
                    color: #c0c0c0;
                    font-size: 1rem;
                }

                .pipe {
                    margin: 0 15px;
                    color: #999;
                }

                .genre-details {
                    font-size: 1rem;
                    color: #ddd;
                }

                .action-buttons {
                    margin-top: 30px;
                }

                .btn-booking {
                    background-color: #f84464; 
                    color: white;
                    padding: 12px 30px;
                    border-radius: 6px;
                    text-decoration: none;
                    font-weight: bold;
                    display: inline-block;
                    transition: background-color 0.3s;
                }

                .btn-booking:hover {
                    background-color: #d1304d;
                }

                .detail-section {
                    max-width: 1200px;
                    margin: 0 auto;
                    padding: 20px 30px;
                }

                .detail-section h2 {
                    font-size: 24px;
                    color: #333;
                    border-bottom: 2px solid #eee;
                    padding-bottom: 10px;
                    margin-bottom: 15px;
                }

                .detail-section p {
                    color: #555;
                    line-height: 1.6;
                }
            </style>
        </h:head>

        <h:body>

            <h:panelGroup rendered="#{movieDetailController.currentMovie != null}">

                <h:messages globalOnly="true" style="color: red;"/>

                <div class="detail-hero" 
                     style="background-image: url('#{resource['images/' += movieDetailController.currentMovie.posterImagePath]}');">

                    <div class="detail-content">
                        <div class="poster-small">
                            <h:graphicImage library="images" name="#{movieDetailController.currentMovie.posterImagePath}" 
                                            alt="#{movieDetailController.currentMovie.movieTitle}"/>
                        </div>
                        <div class="info">
                            <h1>#{movieDetailController.currentMovie.movieTitle}</h1>
                            <p class="languages">#{movieDetailController.currentMovie.languages}</p>
                            <div class="rating-info">
                                <span class="rating-large">⭐ #{movieDetailController.currentMovie.avgRating}/10</span>
                                <span class="votes-large">#{movieDetailController.currentMovie.voteCount}+ Votes</span>
                                <span class="pipe">|</span>
                                <span class="genre-details">
                                    #{movieDetailController.currentMovie.genre}, #{movieDetailController.currentMovie.subGenres} 
                                    | #{movieDetailController.currentMovie.durationMin}m
                                </span>
                            </div>

                            <div class="action-buttons">
                                <h:link outcome="booking" styleClass="btn-booking">
                                    <f:param name="movieId" value="#{movieDetailController.currentMovie.movieId}" />
                                    Book Tickets (Price: ₹#{movieDetailController.currentMovie.ticketPrice})
                                </h:link>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="detail-section">
                    <h2>About the movie</h2>
                    <p>#{movieDetailController.currentMovie.description}</p>
                </div>

                <div class="detail-section">
                    <h2>Cast - Crew</h2>
                    <p>#{movieDetailController.currentMovie.castCrew}</p>
                </div>

            </h:panelGroup>

            <h:panelGroup rendered="#{movieDetailController.currentMovie == null and movieDetailController.movieId != null}">
                <p style="text-align: center; margin-top: 50px; font-size: 1.2em; color: #e50914;">Movie not found. Please check the ID.</p>
            </h:panelGroup>

        </h:body>
    </f:view>
</html>
